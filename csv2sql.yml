path.data: data
path.logs: log

api_bind: 0.0.0.0:2900

modules:
- name: api
  enabled: true

plugins:
- name: csv2sql
  enabled: true

- name: persist
  enabled: true
  driver: mysql
  mysql:
    connection: root:qeephp@tcp(localhost:3306)/ifish?charset=utf8&parseTime=true&loc=Local


modules:
- name: pipeline
  enabled: true
  runners:
    - name: process_excel
      enabled: true
      input_queue: primary
      max_go_routine: 1
      threshold_in_ms: 0
      timeout_in_ms: 5000
      default_config:
        start:
          joint: read_csv
          enabled: true
          parameters:
            file_name: "test/import.xlsx"
            sheet_name: 基础数据导入表
            data_start_from_index: 3
            column_name:
            - id
            - outer_code
            - common_name
            - scientific_name
            - english_name
            - chinese_name
            - region_name
            - aquatic_category_id
            - category_name
            - is_homemade
            - aquatic_region_id
            - inner_code
            - produce_pattern
            - feed_pattern
            - produce_pattern
            row_format:
            - 'INSERT INTO `aquatic_base_info` (`id`, `outer_code`, `common_name`, `scientific_name`, `english_name`, `chinese_name`, `region_name`, `aquatic_category_id`)'
            - 'VALUES (<{id: }>, <{outer_code: }>, <{common_name: }>, <{scientific_name: }>, <{english_name: }>, <{chinese_name: }>, <{region_name: }>, <{aquatic_category_id: }>);'

        process:
        - joint: import_sql
          enabled: true

        error:
          joint: on_error
          enabled: true

